<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<section layout:fragment="customStyle">
  <link rel="stylesheet" th:href="@{/css/qna/register.css}" />
</section>
<body>

<div class="container" layout:fragment="content">
  <h1>문의내용</h1>

  <form action="/qna/register" method="post" enctype="multipart/form-data">

    <div class="form-inline-group">
      <label for="category" class="form-label-inline">카테고리</label>
      <select id="category" name="category" class="form-select-inline">
        <option >선택</option>
        <option th:value="공지" sec:authorize="hasRole('ROLE_ADMIN')">공지</option>
        <option th:value="결제">결제</option>
        <option th:value="환불">환불</option>
        <option th:value="시설">시설</option>
        <option th:value="서비스">서비스</option>
        <option th:value="기타">기타</option>
      </select>

      <label style="display: flex; align-items: center; gap: 5px;">
        <input type="checkbox" id="secret" name="secret">
        비밀글 설정
      </label>
    </div>

    <br><br>

    <label for="title">제목</label>
    <input type="text" id="title" name="title" placeholder="제목을 입력해주세요" maxlength="50">

    <br><br>

    <br><br>

    <label for="content">문의 내용</label><br>
    <textarea id="content" name="content" cols="50" rows="10" maxlength="1000" placeholder="문의 내용을 입력해주세요"></textarea>

    <!-- 글자 수 표시 -->
    <div id="charCount" class="char-count">0 / 1000</div>



    <br><br>

    <div id="imagePreviewArea"></div>



    <!-- 파일 업로드 -->
    <div class="file-upload preview-image">
      <input type="text" id="file" class="upload-name" placeholder="선택된 파일 없음" disabled="disabled">
      <label for="input-file">업로드</label>
      <input type="file" name="files" id="input-file" class="upload-hidden" multiple>
    </div>


    <br><br>

    <div class="d-grid gap-2 d-md-flex justi7fy-content-md-end">
      <button type="button" id="listBtn" class="btn btn-primary me-md-2">List</button>
      <button type="submit" id="regBtn" class="btn btn-primary">등록</button>
    </div>

    <input type="hidden" name="userEmail" th:value="${userDTO.userEmail}">
  </form>
  <script th:src="@{/js/qna/boardRegister.js}"></script>
</div>


<script>
  function updateFileName(input) {
   if(input.files && input.files[0]) {
     const fileName = input.files[0].name;
     input.closest('.file-upload').querySelector('.upload-name').value = fileName;
   } else {
     input.closest('.file-upload').querySelector('.upload-name').value = '파일선택';
   }
 }
</script>

</body>
</html>